<!doctype html>
<html class="no-js" lang="zh_CN">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />
<link rel="index" title="索引" href="../../../genindex.html" /><link rel="search" title="搜索" href="../../../search.html" /><link rel="next" title="Docutils Distributor’s Guide" href="distributing.html" /><link rel="prev" title="Docutils 通用参考" href="../../../_toc/dev/general.html" />

    <link rel="shortcut icon" href="../../../_static/favicon.png"/><meta name="generator" content="sphinx-4.3.0, furo 2021.11.16"/>
        <title>Docutils Hacker’s Guide - docutilsx 0.0.1 文档</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=916d6ed8f59335acffa15474ff504849343d4c76" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=0af69da206d614734f649b27d4cdc2dd6c31f41d" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">docutilsx 0.0.1 文档</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">docutilsx 0.0.1 文档</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder=搜索 name="q" aria-label="搜索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">导航</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../web/index.html">Docutils：文档实用工具</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../web/rst.html"></a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Docutils 项目文档概述</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_toc/info.html">项目基础</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../README.html">Docutils 0.18.1b.dev 自述</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../FAQ.html"><span class="sectnum">1</span> Docutils 常见问题（Frequently Asked Questions）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../BUGS.html">Docutils 错误</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../COPYING.html">Docutils 分发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../RELEASE-NOTES.html">Docutils 发行说明</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../HISTORY.html">Docutils 历史</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../THANKS.html">致谢</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_toc/user/index.html">用户相关</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/user/general.html">Docutils 通用</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/tools.html">Docutils Front-End Tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/config.html">Docutils Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/mailing-lists.html">Docutils Mailing Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/links.html">Docutils 链接列表</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/user/write.html">写作相关</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/html.html">Docutils HTML writers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/slide-shows.html">Easy Slide Shows With reST &amp; S5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/latex.html"><span class="sectnum">1</span> Generating LaTeX with Docutils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/odt.html"><span class="sectnum">1</span> Odt Writer for Docutils</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/user/rst.html">reStructuredText</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/rst/quickstart.html">ReStructuredText 初探</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/rst/cheatsheet.html">The reStructuredText Cheat Sheet: Syntax Reminders</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/user/editor.html">编辑器支持</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/emacs.html">Emacs Support for reStructuredText</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/user/other.html">其他</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../user/manpage.html">manpage writer for Docutils</a></li>
<li class="toctree-l3"><a class="reference internal" href="../user/smartquotes.html">Smart Quotes for Docutils</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_toc/ref/index.html">所有组的参考资料</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/ref/general.html">Docutils 通用参考</a><input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ref/doctree.html">The Docutils Document Tree</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ref/transforms.html">Docutils Transforms</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/ref/rst.html">reStructuredText</a><input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../ref/rst/introduction.html">An Introduction to reStructuredText</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ref/rst/restructuredtext.html">reStructuredText Markup Specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ref/rst/directives.html">reStructuredText Directives</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ref/rst/roles.html">reStructuredText Interpreted Text Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ref/rst/definitions.html">reStructuredText Standard Definition Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ref/rst/mathematics.html"><span class="sectnum">1</span> LaTeX syntax for mathematics</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../web/mirror/setext.html">Setext 文档镜像</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_toc/peps.html">Python Enhancement Proposals</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../peps/pep-0256.html">PEP 256: Docstring Processing System Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peps/pep-0257.html">PEP 257: Docstring Conventions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peps/pep-0258.html">PEP 258: Docutils Design Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="../peps/pep-0287.html">PEP 287: reStructuredText Docstring Format</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_toc/api.html">API Reference Material for Client-Developers</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/publisher.html">The Docutils Publisher</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/cmdline-tool.html">Inside A Docutils Command-Line Front-End Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/runtime-settings.html">Docutils Runtime Settings</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_toc/howto.html">Instructions for Developers</a><input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" role="switch" type="checkbox"/><label for="toctree-checkbox-13"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../howto/security.html">Deploying Docutils Securely</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/html-stylesheets.html">Writing HTML (CSS) Stylesheets for Docutils</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/i18n.html">Docutils Internationalization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/rst-directives.html">Creating reStructuredText Directives</a></li>
<li class="toctree-l2"><a class="reference internal" href="../howto/rst-roles.html">Creating reStructuredText Interpreted Text Roles</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../../_toc/dev/index.html">Development Notes and Plans for Core-Developers</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" role="switch" type="checkbox"/><label for="toctree-checkbox-14"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current has-children"><a class="reference internal" href="../../../_toc/dev/general.html">Docutils 通用参考</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" role="switch" type="checkbox"/><label for="toctree-checkbox-15"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current current-page"><a class="current reference internal" href="#">Docutils Hacker’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="distributing.html">Docutils Distributor’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="todo.html">Docutils To Do List</a></li>
<li class="toctree-l3"><a class="reference internal" href="policies.html">Docutils Project Policies</a></li>
<li class="toctree-l3"><a class="reference internal" href="website.html">Docutils Web Site</a></li>
<li class="toctree-l3"><a class="reference internal" href="release.html">Docutils Release Procedure</a></li>
<li class="toctree-l3"><a class="reference internal" href="repository.html">Docutils 版本库</a></li>
<li class="toctree-l3"><a class="reference internal" href="testing.html">Docutils Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="semantics.html">Docstring Semantics</a></li>
<li class="toctree-l3"><a class="reference internal" href="pysource.html">Python Source Reader</a></li>
<li class="toctree-l3"><a class="reference internal" href="enthought-plan.html"><span class="sectnum">1</span> Plan for Enthought API Documentation Tool</a></li>
<li class="toctree-l3"><a class="reference internal" href="enthought-rfp.html"><span class="sectnum">1</span> Enthought API Documentation Tool</a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../_toc/dev/rst.html">reStructuredText 参考</a><input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" role="switch" type="checkbox"/><label for="toctree-checkbox-16"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="rst/alternatives.html">A Record of reStructuredText Syntax Alternatives</a></li>
<li class="toctree-l3"><a class="reference internal" href="rst/problems.html">Problems With StructuredText</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../_toc/sandbox.html">sandbox</a><input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" role="switch" type="checkbox"/><label for="toctree-checkbox-17"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../sandbox/README.html">Sandbox 自述</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="docutils-hacker-s-guide">
<h1><a class="reference external" href="http://docutils.sourceforge.net/">Docutils</a> Hacker’s Guide<a class="headerlink" href="#docutils-hacker-s-guide" title="永久链接至标题">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author</dt>
<dd class="field-odd"><p>Lea Wiemann</p>
</dd>
<dt class="field-even">Contact</dt>
<dd class="field-even"><p><a class="reference external" href="mailto:docutils-develop%40lists.sourceforge.net">docutils-develop<span>@</span>lists<span>.</span>sourceforge<span>.</span>net</a></p>
</dd>
<dt class="field-odd">Revision</dt>
<dd class="field-odd"><p>$Revision$</p>
</dd>
<dt class="field-even">Date</dt>
<dd class="field-even"><p>$Date$</p>
</dd>
<dt class="field-odd">Copyright</dt>
<dd class="field-odd"><p>This document has been placed in the public domain.</p>
</dd>
<dt class="field-even">Abstract</dt>
<dd class="field-even"><p>This is the introduction to Docutils for all persons who
want to extend Docutils in some way.</p>
</dd>
<dt class="field-odd">Prerequisites</dt>
<dd class="field-odd"><p>You have used <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> and played around with
the <a class="reference external" href="../user/tools.html">Docutils front-end tools</a> before.  Some (basic) Python
knowledge is certainly helpful (though not necessary, strictly
speaking).</p>
</dd>
</dl>
<div class="contents topic" id="id1">
<p class="topic-title">目录</p>
<ul class="simple">
<li><p><a class="reference internal" href="#docutils-hacker-s-guide" id="id2">Docutils Hacker’s Guide</a></p>
<ul>
<li><p><a class="reference internal" href="#overview-of-the-docutils-architecture" id="id3">Overview of the Docutils Architecture</a></p>
<ul>
<li><p><a class="reference internal" href="#reading-the-document" id="id4">Reading the Document</a></p></li>
<li><p><a class="reference internal" href="#parsing-the-document" id="id5">Parsing the Document</a></p></li>
<li><p><a class="reference internal" href="#transforming-the-document" id="id6">Transforming the Document</a></p></li>
<li><p><a class="reference internal" href="#writing-the-document" id="id7">Writing the Document</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#extending-docutils" id="id8">Extending Docutils</a></p>
<ul>
<li><p><a class="reference internal" href="#modifying-the-document-tree-before-it-is-written" id="id9">Modifying the Document Tree Before It Is Written</a></p></li>
<li><p><a class="reference internal" href="#the-node-interface" id="id10">The Node Interface</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-now" id="id11">What Now?</a></p></li>
</ul>
</li>
</ul>
</div>
<section id="overview-of-the-docutils-architecture">
<h2><a class="toc-backref" href="#id3">Overview of the Docutils Architecture</a><a class="headerlink" href="#overview-of-the-docutils-architecture" title="永久链接至标题">¶</a></h2>
<p>To give you an understanding of the Docutils architecture, we’ll dive
right into the internals using a practical example.</p>
<p>Consider the following reStructuredText file:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">My</span> <span class="o">*</span><span class="n">favorite</span><span class="o">*</span> <span class="n">language</span> <span class="ow">is</span> <span class="n">Python_</span><span class="o">.</span>

<span class="o">..</span> <span class="n">_Python</span><span class="p">:</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">www</span><span class="o">.</span><span class="n">python</span><span class="o">.</span><span class="n">org</span><span class="o">/</span>
</pre></div>
</div>
<p>Using the <code class="docutils literal notranslate"><span class="pre">rst2html.py</span></code> front-end tool, you would get an HTML output
which looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">uninteresting</span> <span class="n">HTML</span> <span class="n">code</span> <span class="n">removed</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">div</span> <span class="n">class</span><span class="o">=</span><span class="s2">"document"</span><span class="o">&gt;</span>
<span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="n">My</span> <span class="o">&lt;</span><span class="n">em</span><span class="o">&gt;</span><span class="n">favorite</span><span class="o">&lt;/</span><span class="n">em</span><span class="o">&gt;</span> <span class="n">language</span> <span class="ow">is</span> <span class="o">&lt;</span><span class="n">a</span> <span class="n">class</span><span class="o">=</span><span class="s2">"reference"</span> <span class="n">href</span><span class="o">=</span><span class="s2">"http://www.python.org/"</span><span class="o">&gt;</span><span class="n">Python</span><span class="o">&lt;/</span><span class="n">a</span><span class="o">&gt;.&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">div</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">&lt;/</span><span class="n">html</span><span class="o">&gt;</span>
</pre></div>
</div>
<p>While this looks very simple, it’s enough to illustrate all internal
processing stages of Docutils.  Let’s see how this document is
processed from the reStructuredText source to the final HTML output:</p>
<section id="reading-the-document">
<h3><a class="toc-backref" href="#id4">Reading the Document</a><a class="headerlink" href="#reading-the-document" title="永久链接至标题">¶</a></h3>
<p>The <strong>Reader</strong> reads the document from the source file and passes it
to the parser (see below).  The default reader is the standalone
reader (<code class="docutils literal notranslate"><span class="pre">docutils/readers/standalone.py</span></code>) which just reads the input
data from a single text file.  Unless you want to do really fancy
things, there is no need to change that.</p>
<p>Since you probably won’t need to touch readers, we will just move on
to the next stage:</p>
</section>
<section id="parsing-the-document">
<h3><a class="toc-backref" href="#id5">Parsing the Document</a><a class="headerlink" href="#parsing-the-document" title="永久链接至标题">¶</a></h3>
<p>The <strong>Parser</strong> analyzes the the input document and creates a <strong>node
tree</strong> representation.  In this case we are using the
<strong>reStructuredText parser</strong> (<code class="docutils literal notranslate"><span class="pre">docutils/parsers/rst/__init__.py</span></code>).
To see what that node tree looks like, we call <code class="docutils literal notranslate"><span class="pre">quicktest.py</span></code> (which
can be found in the <code class="docutils literal notranslate"><span class="pre">tools/</span></code> directory of the Docutils distribution)
with our example file (<code class="docutils literal notranslate"><span class="pre">test.txt</span></code>) as first parameter (Windows users
might need to type <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">quicktest.py</span> <span class="pre">test.txt</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ quicktest.py test.txt
&lt;document source="test.txt"&gt;
    &lt;paragraph&gt;
        My
        &lt;emphasis&gt;
            favorite
         language is
        &lt;reference name="Python" refname="python"&gt;
            Python
        .
    &lt;target ids="python" names="python" refuri="http://www.python.org/"&gt;
</pre></div>
</div>
<p>Let us now examine the node tree:</p>
<p>The top-level node is <code class="docutils literal notranslate"><span class="pre">document</span></code>.  It has a <code class="docutils literal notranslate"><span class="pre">source</span></code> attribute
whose value is <code class="docutils literal notranslate"><span class="pre">text.txt</span></code>.  There are two children: A <code class="docutils literal notranslate"><span class="pre">paragraph</span></code>
node and a <code class="docutils literal notranslate"><span class="pre">target</span></code> node.  The <code class="docutils literal notranslate"><span class="pre">paragraph</span></code> in turn has children: A
text node (“My “), an <code class="docutils literal notranslate"><span class="pre">emphasis</span></code> node, a text node (” language is “),
a <code class="docutils literal notranslate"><span class="pre">reference</span></code> node, and again a <code class="docutils literal notranslate"><span class="pre">Text</span></code> node (“.”).</p>
<p>These node types (<code class="docutils literal notranslate"><span class="pre">document</span></code>, <code class="docutils literal notranslate"><span class="pre">paragraph</span></code>, <code class="docutils literal notranslate"><span class="pre">emphasis</span></code>, etc.) are
all defined in <code class="docutils literal notranslate"><span class="pre">docutils/nodes.py</span></code>.  The node types are internally
arranged as a class hierarchy (for example, both <code class="docutils literal notranslate"><span class="pre">emphasis</span></code> and
<code class="docutils literal notranslate"><span class="pre">reference</span></code> have the common superclass <code class="docutils literal notranslate"><span class="pre">Inline</span></code>).  To get an
overview of the node class hierarchy, use epydoc (type <code class="docutils literal notranslate"><span class="pre">epydoc</span>
<span class="pre">nodes.py</span></code>) and look at the class hierarchy tree.</p>
</section>
<section id="transforming-the-document">
<h3><a class="toc-backref" href="#id6">Transforming the Document</a><a class="headerlink" href="#transforming-the-document" title="永久链接至标题">¶</a></h3>
<p>In the node tree above, the <code class="docutils literal notranslate"><span class="pre">reference</span></code> node does not contain the
target URI (<code class="docutils literal notranslate"><span class="pre">http://www.python.org/</span></code>) yet.</p>
<p>Assigning the target URI (from the <code class="docutils literal notranslate"><span class="pre">target</span></code> node) to the
<code class="docutils literal notranslate"><span class="pre">reference</span></code> node is <em>not</em> done by the parser (the parser only
translates the input document into a node tree).</p>
<p>Instead, it’s done by a <strong>Transform</strong>.  In this case (resolving a
reference), it’s done by the <code class="docutils literal notranslate"><span class="pre">ExternalTargets</span></code> transform in
<code class="docutils literal notranslate"><span class="pre">docutils/transforms/references.py</span></code>.</p>
<p>In fact, there are quite a lot of Transforms, which do various useful
things like creating the table of contents, applying substitution
references or resolving auto-numbered footnotes.</p>
<p>The Transforms are applied after parsing.  To see how the node tree
has changed after applying the Transforms, we use the
<code class="docutils literal notranslate"><span class="pre">rst2pseudoxml.py</span></code> tool:</p>
<pre class="literal-block">$ rst2pseudoxml.py test.txt
&lt;document source="test.txt"&gt;
    &lt;paragraph&gt;
        My
        &lt;emphasis&gt;
            favorite
         language is
        &lt;reference name="Python" <strong>refuri="http://www.python.org/"</strong>&gt;
            Python
        .
    &lt;target ids="python" names="python" <code class="docutils literal notranslate"><span class="pre">refuri="http://www.python.org/"</span></code>&gt;</pre>
<p>For our small test document, the only change is that the <code class="docutils literal notranslate"><span class="pre">refname</span></code>
attribute of the reference has been replaced by a <code class="docutils literal notranslate"><span class="pre">refuri</span></code>
attribute—the reference has been resolved.</p>
<p>While this does not look very exciting, transforms are a powerful tool
to apply any kind of transformation on the node tree.</p>
<p>By the way, you can also get a “real” XML representation of the node
tree by using <code class="docutils literal notranslate"><span class="pre">rst2xml.py</span></code> instead of <code class="docutils literal notranslate"><span class="pre">rst2pseudoxml.py</span></code>.</p>
</section>
<section id="writing-the-document">
<h3><a class="toc-backref" href="#id7">Writing the Document</a><a class="headerlink" href="#writing-the-document" title="永久链接至标题">¶</a></h3>
<p>To get an HTML document out of the node tree, we use a <strong>Writer</strong>, the
HTML writer in this case (<code class="docutils literal notranslate"><span class="pre">docutils/writers/html4css1.py</span></code>).</p>
<p>The writer receives the node tree and returns the output document.
For HTML output, we can test this using the <code class="docutils literal notranslate"><span class="pre">rst2html.py</span></code> tool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rst2html.py --link-stylesheet test.txt
&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;meta name="generator" content="Docutils 0.3.10: http://docutils.sourceforge.net/" /&gt;
&lt;title&gt;&lt;/title&gt;
&lt;link rel="stylesheet" href="../docutils/writers/html4css1/html4css1.css" type="text/css" /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;div class="document"&gt;
&lt;p&gt;My &lt;em&gt;favorite&lt;/em&gt; language is &lt;a class="reference" href="http://www.python.org/"&gt;Python&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre></div>
</div>
<p>So here we finally have our HTML output.  The actual document contents
are in the fourth-last line.  Note, by the way, that the HTML writer
did not render the (invisible) <code class="docutils literal notranslate"><span class="pre">target</span></code> node—only the
<code class="docutils literal notranslate"><span class="pre">paragraph</span></code> node and its children appear in the HTML output.</p>
</section>
</section>
<section id="extending-docutils">
<h2><a class="toc-backref" href="#id8">Extending Docutils</a><a class="headerlink" href="#extending-docutils" title="永久链接至标题">¶</a></h2>
<p>Now you’ll ask, “how do I actually extend Docutils?”</p>
<p>First of all, once you are clear about <em>what</em> you want to achieve, you
have to decide <em>where</em> to implement it—in the Parser (e.g. by
adding a directive or role to the reStructuredText parser), as a
Transform, or in the Writer.  There is often one obvious choice among
those three (Parser, Transform, Writer).  If you are unsure, ask on
the <a class="reference external" href="../user/mailing-lists.html#docutils-develop">Docutils-develop</a> mailing list.</p>
<p>In order to find out how to start, it is often helpful to look at
similar features which are already implemented.  For example, if you
want to add a new directive to the reStructuredText parser, look at
the implementation of a similar directive in
<code class="docutils literal notranslate"><span class="pre">docutils/parsers/rst/directives/</span></code>.</p>
<section id="modifying-the-document-tree-before-it-is-written">
<h3><a class="toc-backref" href="#id9">Modifying the Document Tree Before It Is Written</a><a class="headerlink" href="#modifying-the-document-tree-before-it-is-written" title="永久链接至标题">¶</a></h3>
<p>You can modify the document tree right before the writer is called.
One possibility is to use the <a class="reference external" href="../api/publisher.html#publish_doctree">publish_doctree</a> and
<a class="reference external" href="../api/publisher.html#publish_from_doctree">publish_from_doctree</a> functions.</p>
<p>To retrieve the document tree, call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">document</span> <span class="o">=</span> <span class="n">docutils</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">publish_doctree</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Please see the docstring of publish_doctree for a list of parameters.</p>
<p><code class="docutils literal notranslate"><span class="pre">document</span></code> is the root node of the document tree.  You can now
change the document by accessing the <code class="docutils literal notranslate"><span class="pre">document</span></code> node and its
children—see <a class="reference internal" href="#the-node-interface">The Node Interface</a> below.</p>
<p>When you’re done with modifying the document tree, you can write it
out by calling:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">output</span> <span class="o">=</span> <span class="n">docutils</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">publish_from_doctree</span><span class="p">(</span><span class="n">document</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="the-node-interface">
<h3><a class="toc-backref" href="#id10">The Node Interface</a><a class="headerlink" href="#the-node-interface" title="永久链接至标题">¶</a></h3>
<p>As described in the overview above, Docutils’ internal representation
of a document is a tree of nodes.  We’ll now have a look at the
interface of these nodes.</p>
<p>(To be completed.)</p>
</section>
</section>
<section id="what-now">
<h2><a class="toc-backref" href="#id11">What Now?</a><a class="headerlink" href="#what-now" title="永久链接至标题">¶</a></h2>
<p>This document is not complete.  Many topics could (and should) be
covered here.  To find out with which topics we should write about
first, we are awaiting <em>your</em> feedback.  So please ask your questions
on the <a class="reference external" href="../user/mailing-lists.html#docutils-develop">Docutils-develop</a> mailing list.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="distributing.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Docutils Distributor’s Guide</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../../../_toc/dev/general.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Docutils 通用参考</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, xinetzone |
          Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
          <a href="https://github.com/pradyunsg/furo">Furo theme</a>.
            | <a class="muted-link" href="../../../_sources/docutils/docs/dev/hacking.txt"
               rel="nofollow">
              显示源代码
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            目录
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Docutils Hacker’s Guide</a><ul>
<li><a class="reference internal" href="#overview-of-the-docutils-architecture">Overview of the Docutils Architecture</a><ul>
<li><a class="reference internal" href="#reading-the-document">Reading the Document</a></li>
<li><a class="reference internal" href="#parsing-the-document">Parsing the Document</a></li>
<li><a class="reference internal" href="#transforming-the-document">Transforming the Document</a></li>
<li><a class="reference internal" href="#writing-the-document">Writing the Document</a></li>
</ul>
</li>
<li><a class="reference internal" href="#extending-docutils">Extending Docutils</a><ul>
<li><a class="reference internal" href="#modifying-the-document-tree-before-it-is-written">Modifying the Document Tree Before It Is Written</a></li>
<li><a class="reference internal" href="#the-node-interface">The Node Interface</a></li>
</ul>
</li>
<li><a class="reference internal" href="#what-now">What Now?</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script src="../../../_static/translations.js"></script>
    </body>
</html>